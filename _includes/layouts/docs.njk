---
layout: layouts/base.njk

sidebar:
  - getting-started
  - advanced
  - about
  - documentation
  - tools
---

<header class="flex <sm:flex-col sm:flex-row px-6 py-6 bg-secondary border-b-1 border-dim">
  <a href="/" class="flex-shrink-0 items-center <sm:(text-center flex flex-col) sm:grid">
    <img src="{{ site_icon }}" class="col-span-1 row-span-2 h-18 w-18 <sm:mb-4 sm:mr-4">
    <h1 class="col-start-2 mt-auto font-mono font-bold text-lg">{{ site_name }}</h1>
    <p class="col-start-2 mb-auto text-xs max-w-56">{{ site_description }}</p>
  </a>
  <nav class="sm:ml-auto" aria-label="links">
    <ul class="flex flex-row flex-wrap justify-center sm:(items-center h-full) <sm:(mt-6 max-w-prose)">
      {% for btn in nav %}
      <li class="p-1">
        <a href="{{ btn.url }}" class="button text-sm">
          <svg class="feather">
            <use href="/dep/feather-sprite.svg#{{ btn.icon }}"/>
          </svg>
          <span>{{ btn.text }}</span>
        </a>
      </li>
      {% endfor %}
    </ul>
  </nav>
</header>

<main class="flex-grow flex <md:flex-col overflow-hidden">

  <aside aria-label="menu" class="
    pt-2 pb-8 px-10 w-64 min-h-full border-r-1 border-dim text-base bg-main
    <md:(absolute top-0 left-0 transform -translate-x-64) flex-shrink-0
    overflow-y-auto
  ">
    <ul>
    {% for section in sidebar %}
      <li>
        <p class="mt-6 mb-2"><strong>{{ search.data(section).section }}</strong></p>
        <ul>
        {% for page in search.pages(section, "order title") %}
          <li>
          {% if page.data.url == url %}
            <a aria-current="page" aria-description="{{ page.data.description }}" href="{{ page.data.url }}" 
              class="border-l border-primary pl-3 py-1 text-sm text-primary"
            >{{ page.data.title | md(true) | safe }}</a>
          {% else %}
            <a aria-description="{{ page.data.description }}" href="{{ page.data.url }}" class="
              border-l border-dim pl-3 py-1 text-sm transition duration-200
              text-dim hover:text-primary
            ">{{ page.data.title | md(true) | safe }}</a>
          {% endif %}
          </li>
        {% endfor %}
        </ul>
      </li>
    {% endfor %}
    </ul>
  </aside>

  <article class="px-10 py-8 w-full min-h-full flex flex-col <md:flex-grow overflow-y-auto">
    <div class="prose flex-grow">
      {{ content | safe }}
    </div>

    {% if edit_url %}
      <a href="{{ edit_url }}{{ filename }}" class="mt-8 link flex items-center space-x-3">
        <svg class="feather">
          <use href="/dep/feather-sprite.svg#edit-3"/>
        </svg>
        <span>Edit this page</span>
      </a>
    {% endif %}

    <footer class="max-w-prose flex border-dim border-t mt-8 pt-8">
      {%- set prev = search.previousPage(url, "url!=/", "section_order order title") %}
      {%- if prev %}
      <a href="{{ prev.data.url }}" rel="prev" class="link flex items-center space-x-3">
        <svg class="feather">
          <use href="/dep/feather-sprite.svg#arrow-left"/>
        </svg>
        <span>{{ prev.data.title | md(true) | safe }}</span>
      </a>
      {% endif %}

      {%- set next = search.nextPage(url, "url!=/", "section_order order title") %}
      {%- if next %}
      <a href="{{ next.data.url }}" rel="next" class="ml-auto link flex items-center space-x-3">
        <span>{{ next.data.title | md(true) | safe }}</span>
        <svg class="feather">
          <use href="/dep/feather-sprite.svg#arrow-right"/>
        </svg>
      </a>
      {% endif %}
    </footer>
  </article>

  <aside aria-label="table of contents" class="
    pt-2 pb-8 px-4 w-64 min-h-full border-r-1 border-dim text-base bg-main
    <lg:hidden flex-shrink-0 overflow-y-auto
  ">
    <p class="mt-6 mb-2 ml-3"><strong>Table Of Contents</strong></p>
    <ul>
    {% for heading in table_of_contents %}
      <li>
        <a href="#{{ heading.slug }}" class="
          py-1 transition duration-100
          inline-flex w-full items-center justify-between
          text-sm text-dim py-2 px-3 rounded-md
          hover:(text-primary bg-light-600 dark:bg-dark-500)
        ">{{ heading.text | md(true) | safe }}</a>
      </li>
    {% endfor %}
    </ul>
  </aside>

</main>
